# 汽车租赁系统

# 功能综述

**用户端**
首页：展示轮播图，推荐的汽车，以卡片的形式展示，点击卡片可以跳转到车辆的详情页。
热租的品牌，以图片形式顺序展示，点击品牌图片可以跳转到根据品牌查询车辆信息页面
租车中心
可以根据城市，类别，品牌查询车辆信息
车辆都是以卡片形式展示，有分页的功能，点击车辆卡片也可以跳转到车辆详情页，
在车辆详情页可以点击收藏，订车。
订车需要输入取车的时间，还车的时间，手机号。
我的订单
订车后，可以在我的订单中查到订车信息，
并且该车的状态为待发车，此时用户可以进行取消，此时管理员可以将汽车的状态改为发车，需要设置取车的门店，取车的联系电话，
并且可以将发车信息发送给前端，那么汽车的状态就变成待取车，用户可以点击已取车，将汽车的状态修改为已取车，此时按钮变成还车，用户可以根据这个按钮将状态改为还车。
还车的同时，需要减用户的于额，用户也可以进行充值，

0--待发车，1--发车 ，2--待取车，3--已取车，4--完成

汽车资迅
以卡片的形式展示一些关于汽车的新闻，内容是以富文本形式填写，用户只有观看的权限

管理端
首页
数据展示
核心业务处理
汽车管理
订单管理
新闻资迅管理
收藏管理
品牌管理
类型管理
城市管理

订单表：
名称，图片，取车时间，还车时间，实际还车时间，订单的状态，取车的地址，取车的电话，总价格，租车的天数，订单说明。
车辆表；
名称，品牌，类型，图片，描述，年款，座位数，油箱容积，排量，燃油型号，单日租价，取车城市，颜色，肾盂数量，收藏量
品牌表，需要有图片，
类别表，
城市表，
新闻资迅表
收藏表

# 一，数据库表设计

## 1.1 汽车表

### 1.1.1 汽车基本表

car

id  汽车id

car_name  汽车的名字   名称

car_img: 汽车的图片    图片

brand_id  汽车的品牌id   品牌

type_id：汽车的车型  类型

status  汽车的状态，0 --在售  1--已售  1-- 下架

year   年款

stock：汽车的库存   肾盂数量

price 汽车的单日租价

color  颜色

favorites_num   收藏量

city_id    取车城市

is_delete：是否删除 0--未删除 1--删除

create_time：新闻的创建时间

update_time：新闻的更新时间

### 1.1.2 汽车详情表

car_detail

id 汽车详情表id

car_id  关联的汽车id

door_count  车门数

seat_count   座位数

mileage  里程

tank_capacity  邮箱容积

displacement  排量

fuel_type    燃油型号

description：汽车的描述

is_delete：是否删除 0--未删除 1--删除

create_time：新闻的创建时间

update_time：新闻的更新时间

## 1.2 品牌表

一个汽车对应一个品牌，一个品牌下有多个汽车，在汽车表设置外键进行关联

id  汽车品牌id，

brand_img：品牌的照片

brand_name：品牌名称

## 1.3 汽车的车型表

id：车型id

type_name：车型的名字

## 1.4 新闻表

对于新闻表，用户只有查看的权限，只有管理员对新闻进行curd

id： 新闻的id

title： 新闻的标题

content：内容

new_img：新闻的封面

user_id：新闻的发布者

author：新闻的作者。

is_delete：是否删除 0--未删除 1--删除

create_time：新闻的创建时间

update_time：新闻的更新时间

## 1.5 订单表

![image-20251003192524279](汽车租赁系统.assets/image-20251003192524279.png)

![image-20251003192556049](汽车租赁系统.assets/image-20251003192556049.png)

id：订单id

order_id：订单号

status：订单的状态，0--待发车，1--发车 ，2--待取车，3--已取车，4--完成

user_id：用户id

car_id：汽车的id

order_time：下单时间

pick_car_time   取车时间

turn_car_time：还车时间

real_turn_time：实际还车时间

pick_car_localtion： 取车地点

pick_car_phone：取车联系电话

car_name：车辆的名称

car_img：车辆的图片

username：下单人

user_phone：下单人的联系电话

render_day：   租车的天数

amount：总价格

remark：订单说明

is_delete：是否删除 0--未删除 1--删除

create_time：创建时间

update_time：更新时间

## 1.6 收藏表

favorites

id ：收藏表的id

car_id：收藏的汽车id

car_name：收藏汽车的名字

car_img：收藏汽车的图片

description：收藏汽车的描述

user_id：收藏的用户id

username：收藏的用户的名字

is_delete：是否删除 0--未删除 1--删除

create_time：创建时间

update_time：更新时间

## 1.7 城市表

city

id：城市id

city_name：城市的名称

is_delete：是否删除 0--未删除 1--删除

create_time：创建时间

update_time：更新时间

## 1.8 用户表

id：用户id

username：用户的名字

password：用户的密码

role_id：用户的角色

phone：手机号

gender：性别

email：邮箱

avatar：头像

is_delete：是否删除 0--未删除 1--删除

create_time：创建时间

update_time：更新时间

## 1.9 角色表

id：角色id

role_name：角色名字， 只有普通用户和管理员

remark：备注

## 1.10 用户角色表

id：用户角色表id

user_id：用户id

role_id ：角色id

## 1.11 菜单表

id：菜单id

pid：父级菜单id

menu_name：菜单名字

icon：菜单的图标

route：菜单的路由

is_delete：是否删除 0--未删除 1--删除

create_time：创建时间

update_time：更新时间

## 1.12 角色菜单表

用于控制用户能够访问哪些菜单

id：角色菜单id

rid：角色id

mid：菜单id

# 二，后端接口搭建

## 2.1 封装统一响应对象

后端需要响应统一的格式给前端。

具体格式：

```js
{
    "code":200;
    "message":"ok";
    "description":"请求成功";
    "data":"响应的数据"
}
```



## 2.2 用户管理

### 2.2.1 登录接口

用户登录需要携带用户名和密码，验证码，和验证码id，四个参数，对于用户名，密码，验证码需要进行前置的校验

用户名的长度不能低于3位数。

密码不能低于6位数。

验证码需要校验是否过期，是否正确

将密码进行加密后查询数据库，判断用户名和密码是否正确。

**登录成功需要返回token给前端。**

**登录方式2：QQ邮箱验证登录**

用户需要传递正确的QQ邮箱和验证码，后端从redis中获取正确的验证码，与用户的验证码进行比较。

并且需要判断该邮箱是否存在，如果不存在，就返回错误信息。

### 2.2.2 注册接口

用户注册需要携带用户名，密码，和确认密码和邮箱进行注册，

需要校验参数的合理性。注册成功，需要将用户的相关信息和用户密码加密保存到数据库。

设置用户的初始角色为普通用户。

### 2.2.3 获取验证码接口

用户第一次登录时，会为该用户生成一个codeId和验证码，并且以codeId为键，验证码为值存入到session中。

并且将验证码，codeId，验证码图片返回给前端。

### 2.2.4 用户头像上传阿里云OSS





